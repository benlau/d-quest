\hypertarget{classDQForeignKey}{
\section{DQForeignKey$<$ T $>$ Class Template Reference}
\label{classDQForeignKey}\index{DQForeignKey@{DQForeignKey}}
}


Foreign key field.  




{\ttfamily \#include $<$dqforeignkey.h$>$}

Inheritance diagram for DQForeignKey$<$ T $>$:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classDQForeignKey}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDQForeignKey_a08d0db06b02c4db1deec84200c117602}{
\hyperlink{classDQForeignKey_a08d0db06b02c4db1deec84200c117602}{DQForeignKey} ()}
\label{classDQForeignKey_a08d0db06b02c4db1deec84200c117602}

\begin{DoxyCompactList}\small\item\em Construct a foreign key field. \item\end{DoxyCompactList}\item 
\hypertarget{classDQForeignKey_a9ea90a97cc730abfc7bfe233a7b438eb}{
\hyperlink{classDQForeignKey_a9ea90a97cc730abfc7bfe233a7b438eb}{$\sim$DQForeignKey} ()}
\label{classDQForeignKey_a9ea90a97cc730abfc7bfe233a7b438eb}

\begin{DoxyCompactList}\small\item\em Destruct the foreign key field. \item\end{DoxyCompactList}\item 
\hyperlink{classDQForeignKey}{DQForeignKey} \& \hyperlink{classDQForeignKey_ad2a85ec7abeb654bed3a385743535cc2}{operator=} (T \&rhs)
\begin{DoxyCompactList}\small\item\em Copy from other \hyperlink{classDQForeignKey}{DQForeignKey} object. \item\end{DoxyCompactList}\item 
\hypertarget{classDQForeignKey_ae91635a7ab1bafd2a42915504f59e0eb}{
\hyperlink{classDQForeignKey}{DQForeignKey} \& \hyperlink{classDQForeignKey_ae91635a7ab1bafd2a42915504f59e0eb}{operator=} (QVariant val)}
\label{classDQForeignKey_ae91635a7ab1bafd2a42915504f59e0eb}

\begin{DoxyCompactList}\small\item\em Set the primary key of the \char`\"{}linked\char`\"{} model. \item\end{DoxyCompactList}\item 
\hypertarget{classDQForeignKey_a96261988ee2eb9e8cebd6ec415ee5e0f}{
T $\ast$ \hyperlink{classDQForeignKey_a96261988ee2eb9e8cebd6ec415ee5e0f}{operator-\/$>$} ()}
\label{classDQForeignKey_a96261988ee2eb9e8cebd6ec415ee5e0f}

\begin{DoxyCompactList}\small\item\em Access the data field of the \char`\"{}linked\char`\"{} model. \item\end{DoxyCompactList}\item 
\hypertarget{classDQForeignKey_ae5f15b513afbe527f64e44b8c9697977}{
T \& \hyperlink{classDQForeignKey_ae5f15b513afbe527f64e44b8c9697977}{operator()} ()}
\label{classDQForeignKey_ae5f15b513afbe527f64e44b8c9697977}

\begin{DoxyCompactList}\small\item\em Return an instance of the \char`\"{}linked\char`\"{} model. \item\end{DoxyCompactList}\item 
\hypertarget{classDQForeignKey_a1147f26cf490bc5a806337babd45f1c6}{
bool \hyperlink{classDQForeignKey_a1147f26cf490bc5a806337babd45f1c6}{isLoaded} ()}
\label{classDQForeignKey_a1147f26cf490bc5a806337babd45f1c6}

\begin{DoxyCompactList}\small\item\em TRUE if the model is already loaded. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_af97b044232c392fb2798a9c04d4b2c40}{
bool \hyperlink{classDQField_af97b044232c392fb2798a9c04d4b2c40}{operator==} (const \hyperlink{classDQField}{DQField} \&rhs) const}
\label{classDQField_af97b044232c392fb2798a9c04d4b2c40}

\begin{DoxyCompactList}\small\item\em Compare with other \hyperlink{classDQField}{DQField}. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_acec82d17afefbf25d64f4d46bf404429}{
bool \hyperlink{classDQField_acec82d17afefbf25d64f4d46bf404429}{operator==} (const QVariant \&rhs) const}
\label{classDQField_acec82d17afefbf25d64f4d46bf404429}

\begin{DoxyCompactList}\small\item\em Compare with QVariant type. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a239949c5298e739f37717652a326317b}{
bool \hyperlink{classDQField_a239949c5298e739f37717652a326317b}{operator==} (const int \&t) const}
\label{classDQField_a239949c5298e739f37717652a326317b}

\begin{DoxyCompactList}\small\item\em Compare with its template type. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a77d0bd4973c3b15fcb352ce58f371394}{
bool \hyperlink{classDQField_a77d0bd4973c3b15fcb352ce58f371394}{operator==} (const char $\ast$string) const}
\label{classDQField_a77d0bd4973c3b15fcb352ce58f371394}

\begin{DoxyCompactList}\small\item\em Compare with string type. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a08325fc85199eb54268f8753b0e9668b}{
bool \hyperlink{classDQField_a08325fc85199eb54268f8753b0e9668b}{operator!=} (const QVariant \&rhs) const}
\label{classDQField_a08325fc85199eb54268f8753b0e9668b}

\begin{DoxyCompactList}\small\item\em Compare with QVariant type. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a3938d43781be5c4b3f8db191e0be8ea3}{
bool \hyperlink{classDQField_a3938d43781be5c4b3f8db191e0be8ea3}{operator!=} (const int \&t) const}
\label{classDQField_a3938d43781be5c4b3f8db191e0be8ea3}

\begin{DoxyCompactList}\small\item\em Compare with its template type. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a6713be2b5fa4a2937265be13bbf4eb56}{
bool \hyperlink{classDQField_a6713be2b5fa4a2937265be13bbf4eb56}{operator!=} (const char $\ast$string) const}
\label{classDQField_a6713be2b5fa4a2937265be13bbf4eb56}

\begin{DoxyCompactList}\small\item\em Compare with string type. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a17e36ac914ae0dd938f081f9ade514c7}{
QVariant \hyperlink{classDQField_a17e36ac914ae0dd938f081f9ade514c7}{get} (bool convert=false) const}
\label{classDQField_a17e36ac914ae0dd938f081f9ade514c7}

\begin{DoxyCompactList}\small\item\em Get the value of the field. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a6d53fed742befb445301aa5b99b45489}{
bool \hyperlink{classDQField_a6d53fed742befb445301aa5b99b45489}{set} (QVariant value)}
\label{classDQField_a6d53fed742befb445301aa5b99b45489}

\begin{DoxyCompactList}\small\item\em Set the value of the field. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a619e96cbcecea1545b9ff9c70f08a4a9}{
\hyperlink{classDQField_a619e96cbcecea1545b9ff9c70f08a4a9}{operator int} () const}
\label{classDQField_a619e96cbcecea1545b9ff9c70f08a4a9}

\begin{DoxyCompactList}\small\item\em Cast it to the template type. \item\end{DoxyCompactList}\item 
\hypertarget{classDQBaseField_a34625c95d2baf6794ab15a2c9adbe59e}{
QVariant \hyperlink{classDQBaseField_a34625c95d2baf6794ab15a2c9adbe59e}{operator()} () const }
\label{classDQBaseField_a34625c95d2baf6794ab15a2c9adbe59e}

\begin{DoxyCompactList}\small\item\em Get the value of the field. \item\end{DoxyCompactList}\item 
\hypertarget{classDQBaseField_a6cb1f4cb9501b27818453ec37570580f}{
\hyperlink{classDQBaseField_a6cb1f4cb9501b27818453ec37570580f}{operator QVariant} ()}
\label{classDQBaseField_a6cb1f4cb9501b27818453ec37570580f}

\begin{DoxyCompactList}\small\item\em Cast to QVariant. \item\end{DoxyCompactList}\item 
\hypertarget{classDQBaseField_a0c9970518c790bb356007470f0a6b8c1}{
void \hyperlink{classDQBaseField_a0c9970518c790bb356007470f0a6b8c1}{clear} ()}
\label{classDQBaseField_a0c9970518c790bb356007470f0a6b8c1}

\begin{DoxyCompactList}\small\item\em Free up any resources used. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDQForeignKey_ae57ffa605d06064e7568e8f5af478205}{
static \hyperlink{classDQClause}{DQClause} \hyperlink{classDQForeignKey_ae57ffa605d06064e7568e8f5af478205}{clause} ()}
\label{classDQForeignKey_ae57ffa605d06064e7568e8f5af478205}

\begin{DoxyCompactList}\small\item\em The default clause of that field type. \item\end{DoxyCompactList}\item 
\hypertarget{classDQField_a0e5a0f071bf01560f4c47d233ca726e9}{
static QVariant::Type \hyperlink{classDQField_a0e5a0f071bf01560f4c47d233ca726e9}{type} ()}
\label{classDQField_a0e5a0f071bf01560f4c47d233ca726e9}

\begin{DoxyCompactList}\small\item\em Return the type id of the field. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$typename T$>$ class DQForeignKey$<$ T $>$}

Foreign key field. \hyperlink{classDQForeignKey}{DQForeignKey} is a special kind of \hyperlink{classDQField}{DQField} which can declare a foreign key in SQL scheme.

The foreign key constraints in SQL are used to enforce \char`\"{}exists\char`\"{} relationships between tables. It is a link to other record in same or other database table.

Consider the following data model:


\begin{DoxyCode}
class User : public DQModel
{
    DQ_MODEL
public:
    DQField<QString> userId;
    DQField<QString> name;

    DQField<QString> passwd;
}
\end{DoxyCode}


It is a data model to store user information. Each user may link up other with a \char`\"{}friendship\char`\"{} relation:


\begin{DoxyCode}

class FriendShip : public DQModel {
    DQ_MODEL
public:

    DQForeignKey<User> a;
    DQForeignKey<User> b;

    DQField<QDateTime> creationDate;

};
\end{DoxyCode}


In this example , a and b is a foreign key to user table. The field store a integer which is the primary key of the user.

{\bfseries  Auto loading }

Moreover, \hyperlink{classDQForeignKey}{DQForeignKey} support an auto loading mechanism. You may access the record \char`\"{}linked\char`\"{} by the \hyperlink{classDQForeignKey}{DQForeignKey} through its extended interface.

By default, \hyperlink{classDQForeignKey}{DQForeignKey} only store the foreign key value. Whatever the user request to access the \char`\"{}linked\char`\"{} record field, it will be loaded automatically.


\begin{DoxyCode}
   FriendShip friendship;
   friendship.load(DQWhere("id") == 1 );

   qDebug() << friendship.a.isLoaded(); // It is false. The foreign key only cont
      ains the primary key
   qDebug() << friendship.a->userId; // It will retrieve the user information "li
      nked" by the field "a"
   qDebug() << friendship.a.isLoaded(); // It is true. The foreign key has loaded
       the content from database
\end{DoxyCode}


{\bfseries Assigment operator}

To link with other record, it is just need to use the \char`\"{}=\char`\"{} operator 
\begin{DoxyCode}
    User user;
    user.load(DQWhere("id") == 1 );

    friendship.b = user; // friendship.b will store the primary key of "user"
\end{DoxyCode}
 

\subsection{Member Function Documentation}
\hypertarget{classDQForeignKey_ad2a85ec7abeb654bed3a385743535cc2}{
\index{DQForeignKey@{DQForeignKey}!operator=@{operator=}}
\index{operator=@{operator=}!DQForeignKey@{DQForeignKey}}
\subsubsection[{operator=}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ {\bf DQForeignKey}\& {\bf DQForeignKey}$<$ T $>$::operator= (
\begin{DoxyParamCaption}
\item[{T \&}]{ rhs}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classDQForeignKey_ad2a85ec7abeb654bed3a385743535cc2}


Copy from other \hyperlink{classDQForeignKey}{DQForeignKey} object. 

It will copy the contained model from other \hyperlink{classDQForeignKey}{DQForeignKey} object. The original model will destroyed. 

The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
src/dqforeignkey.h\end{DoxyCompactItemize}
