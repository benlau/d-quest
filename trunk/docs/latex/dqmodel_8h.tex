\hypertarget{dqmodel_8h}{
\section{src/dqmodel.h File Reference}
\label{dqmodel_8h}\index{src/dqmodel.h@{src/dqmodel.h}}
}


Header file for \hyperlink{classDQModel}{DQModel}.  


{\ttfamily \#include $<$QObject$>$}\par
{\ttfamily \#include $<$QVariant$>$}\par
{\ttfamily \#include $<$QStringList$>$}\par
{\ttfamily \#include $<$dqfield.h$>$}\par
{\ttfamily \#include $<$dqconnection.h$>$}\par
{\ttfamily \#include $<$dqwhere.h$>$}\par
{\ttfamily \#include $<$dqsharedlist.h$>$}\par
{\ttfamily \#include $<$dqquery.h$>$}\par
{\ttfamily \#include $<$dqforeignkey.h$>$}\par
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classDQModel}{DQModel}
\begin{DoxyCompactList}\small\item\em Database model class. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{dqmodel_8h_a3dd62113ebe909d6ff4c7785af818dc0}{DQ\_\-FIELD}(field, CLAUSE...)~new DQModelMetaInfoField(\#field,offsetof(Table,field),m.field.type(), m.field.clause(), \#\# CLAUSE)
\begin{DoxyCompactList}\small\item\em Declare a database field. \item\end{DoxyCompactList}\item 
\#define \hyperlink{dqmodel_8h_ac16ac212c89d5a389eaebcf29541981e}{DQ\_\-DECLARE\_\-MODEL}(MODEL, NAME, FIELDS...)
\begin{DoxyCompactList}\small\item\em Declare a model. \item\end{DoxyCompactList}\item 
\#define \hyperlink{dqmodel_8h_ac8caaab5f5dd5cf69e6551d6d5457c9f}{DQ\_\-DECLARE\_\-MODEL2}(MODEL, NAME, PARENT, FIELDS...)
\begin{DoxyCompactList}\small\item\em Declare a model which is not a direct sub-\/class of \hyperlink{classDQModel}{DQModel}. \item\end{DoxyCompactList}\item 
\#define \hyperlink{dqmodel_8h_ab21954e48fe1f711bbfc883e5ae6f241}{DQ\_\-MODEL}
\begin{DoxyCompactList}\small\item\em The DQ\_\-MODEL macro must appear in the class definition that declares model's virtual function for database access. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{dqmodel_8h_ab4fd131e95dde78369eeaf44f902b522}{
QDebug \hyperlink{dqmodel_8h_ab4fd131e95dde78369eeaf44f902b522}{operator$<$$<$} (QDebug d, const \hyperlink{classDQModel}{DQModel} $\ast$model)}
\label{dqmodel_8h_ab4fd131e95dde78369eeaf44f902b522}

\begin{DoxyCompactList}\small\item\em Print model field for debugging. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Header file for \hyperlink{classDQModel}{DQModel}. 

\subsection{Define Documentation}
\hypertarget{dqmodel_8h_ac16ac212c89d5a389eaebcf29541981e}{
\index{dqmodel.h@{dqmodel.h}!DQ\_\-DECLARE\_\-MODEL@{DQ\_\-DECLARE\_\-MODEL}}
\index{DQ\_\-DECLARE\_\-MODEL@{DQ\_\-DECLARE\_\-MODEL}!dqmodel.h@{dqmodel.h}}
\subsubsection[{DQ\_\-DECLARE\_\-MODEL}]{\setlength{\rightskip}{0pt plus 5cm}\#define DQ\_\-DECLARE\_\-MODEL(
\begin{DoxyParamCaption}
\item[{}]{MODEL, }
\item[{}]{NAME, }
\item[{}]{FIELDS...}
\end{DoxyParamCaption}
)}}
\label{dqmodel_8h_ac16ac212c89d5a389eaebcf29541981e}
{\bfseries Value:}
\begin{DoxyCode}
DQ_DECLARE_MODEL_BEGIN(MODEL,NAME) \
            result << DQModelMetaInfoHelper<DQModel>::fields(); \
            DQModelMetaInfoField* list[] = { FIELDS,0 }; \
            result << _dqMetaInfoCreateFields(list) ; \
        DQ_DECLARE_MODEL_END(MODEL,NAME)
\end{DoxyCode}


Declare a model. 

For example,


\begin{DoxyCode}
#include <dquest.h>

class User : public DQModel {
    DQ_MODEL
public:
    DQField<QString> userId;
    DQField<QDateTime> creationDate;
    DQField<qreal> karma;
};

DQ_DECLARE_MODEL(User,
                 "user", // the table name.
                 DQ_FIELD(userId , DQNotNull | DQUnique),
                 DQ_FIELD(creationDate , DQDefault("CURRENT_TIMESTAMP") ),
                 DQ_FIELD(karma)
                 );
\end{DoxyCode}


\begin{DoxySeeAlso}{See also}
\hyperlink{dqmodel_8h_ab21954e48fe1f711bbfc883e5ae6f241}{DQ\_\-MODEL} 

\hyperlink{dqmodel_8h_a3dd62113ebe909d6ff4c7785af818dc0}{DQ\_\-FIELD} 
\end{DoxySeeAlso}
\hypertarget{dqmodel_8h_ac8caaab5f5dd5cf69e6551d6d5457c9f}{
\index{dqmodel.h@{dqmodel.h}!DQ\_\-DECLARE\_\-MODEL2@{DQ\_\-DECLARE\_\-MODEL2}}
\index{DQ\_\-DECLARE\_\-MODEL2@{DQ\_\-DECLARE\_\-MODEL2}!dqmodel.h@{dqmodel.h}}
\subsubsection[{DQ\_\-DECLARE\_\-MODEL2}]{\setlength{\rightskip}{0pt plus 5cm}\#define DQ\_\-DECLARE\_\-MODEL2(
\begin{DoxyParamCaption}
\item[{}]{MODEL, }
\item[{}]{NAME, }
\item[{}]{PARENT, }
\item[{}]{FIELDS...}
\end{DoxyParamCaption}
)}}
\label{dqmodel_8h_ac8caaab5f5dd5cf69e6551d6d5457c9f}
{\bfseries Value:}
\begin{DoxyCode}
DQ_DECLARE_MODEL_BEGIN(MODEL,NAME) \
            result << DQModelMetaInfoHelper<PARENT>::fields(); \
            DQModelMetaInfoField* list[] = { FIELDS,0 }; \
            result << _dqMetaInfoCreateFields(list) ; \
        DQ_DECLARE_MODEL_END(MODEL,NAME)
\end{DoxyCode}


Declare a model which is not a direct sub-\/class of \hyperlink{classDQModel}{DQModel}. 

\hypertarget{dqmodel_8h_a3dd62113ebe909d6ff4c7785af818dc0}{
\index{dqmodel.h@{dqmodel.h}!DQ\_\-FIELD@{DQ\_\-FIELD}}
\index{DQ\_\-FIELD@{DQ\_\-FIELD}!dqmodel.h@{dqmodel.h}}
\subsubsection[{DQ\_\-FIELD}]{\setlength{\rightskip}{0pt plus 5cm}\#define DQ\_\-FIELD(
\begin{DoxyParamCaption}
\item[{}]{field, }
\item[{}]{CLAUSE...}
\end{DoxyParamCaption}
)~new DQModelMetaInfoField(\#field,offsetof(Table,field),m.field.type(), m.field.clause(), \#\# CLAUSE)}}
\label{dqmodel_8h_a3dd62113ebe909d6ff4c7785af818dc0}


Declare a database field. 


\begin{DoxyParams}{Parameters}
\item[{\em field}]The name of the field. You don't need to quote the string \item[{\em CLAUSE}]The column clause of the field. You may skip this parameter if not needed. \end{DoxyParams}
\begin{DoxyRemark}{Remarks}
This macro should be only used within DQ\_\-DECLARE\_\-MODEL / DQ\_\-DECLARE\_\-MODEL2
\end{DoxyRemark}
\begin{DoxySeeAlso}{See also}
\hyperlink{classDQClause}{DQClause} 

\hyperlink{dqclause_8h_a400b2ce762bd0a0d6ec9b08603487b28}{DQNotNull} 

\hyperlink{dqclause_8h_aede52ea9e1a19097718c0db8053caa2d}{DQUnique} 

\hyperlink{dqclause_8h_a75d850e5a09646901dc081d053669698}{DQDefault} 
\end{DoxySeeAlso}
\hypertarget{dqmodel_8h_ab21954e48fe1f711bbfc883e5ae6f241}{
\index{dqmodel.h@{dqmodel.h}!DQ\_\-MODEL@{DQ\_\-MODEL}}
\index{DQ\_\-MODEL@{DQ\_\-MODEL}!dqmodel.h@{dqmodel.h}}
\subsubsection[{DQ\_\-MODEL}]{\setlength{\rightskip}{0pt plus 5cm}\#define DQ\_\-MODEL}}
\label{dqmodel_8h_ab21954e48fe1f711bbfc883e5ae6f241}
{\bfseries Value:}
\begin{DoxyCode}
public: \
    enum { DQModelDefined = 1 }; \
    virtual inline QString tableName() const ; \
    static inline QString TableName(); \
    virtual inline DQModelMetaInfo *metaInfo() const; \
    static inline DQSharedQuery objects(); \
    static inline DQSharedQuery objects(DQConnection connection); \
    template <class T> friend class DQModelMetaInfoHelper;\
\end{DoxyCode}


The DQ\_\-MODEL macro must appear in the class definition that declares model's virtual function for database access. 

For example,


\begin{DoxyCode}
#include <dquest.h>

class User : public DQModel {
    DQ_MODEL
public:
    DQField<QString> userId;
    DQField<QDateTime> creationDate;
    DQField<qreal> karma;
};

DQ_DECLARE_MODEL(User,
                 "user", // the table name.
                 DQ_FIELD(userId , DQNotNull | DQUnique),
                 DQ_FIELD(creationDate , DQDefault("CURRENT_TIMESTAMP") ),
                 DQ_FIELD(karma)
                 );
\end{DoxyCode}


\begin{DoxySeeAlso}{See also}
\hyperlink{dqmodel_8h_ac16ac212c89d5a389eaebcf29541981e}{DQ\_\-DECLARE\_\-MODEL} 
\end{DoxySeeAlso}
